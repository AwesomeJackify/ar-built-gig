---
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import config from "../config.json";

import Hero from "../components/Hero";
import introVideo from "../assets/videos/intro.mp4";
import Gallery from "../components/Gallery";

import bioImg1 from "../assets/images/bio/bio1.jpg";
import bioImg3 from "../assets/images/bio/bio3.jpg";
---

<Layout title={config.businessName}>
  <Hero client:load />
  <section class="bg-accent relative">
    <h1
      class="absolute text-center top-16 max-md:top-8 max-md:text-4xl w-full text-6xl"
    >
      My story, briefly.
    </h1>
    <div
      id="videoMask"
      class="top-0 left-0 w-full h-full"
      style={{
        maskImage: "radial-gradient(circle, black 20%, rgb(0, 0, 0, 0) 20%)",
      }}
    >
      <video
        id="introVideo"
        autoplay
        loop
        muted
        controls
        playsinline={true}
        class="w-full aspect-video max-md:h-96 object-cover"
      >
        <source src={introVideo} type="video/mp4" />
      </video>
    </div>
  </section>
  <section class="bg-secondary py-16 max-md:py-8 px-2">
    <div class="max-w-screen-lg mx-auto flex flex-col gap-8">
      <div
        class="grid grid-cols-2 max-md:grid-cols-1 grid-rows-1 gap-16 max-md:gap-8"
      >
        <h1 class="md:hidden text-8xl max-md:text-7xl font-extrabold">
          Meet The Boys
        </h1>
        <div class="flex flex-col gap-16 max-md:gap-8 max-md:order-1">
          <h1 class="max-md:hidden text-8xl max-md:text-7xl font-extrabold">
            Meet The Boys
          </h1>
          <p
            class="whitespace-pre-line text-4xl max-md:text-3xl font-extralight"
          >
            {config.bioText}
          </p>
        </div>
        <div class="flex flex-col h-full max-md:h-[1000px] max-md:gap-4 gap-8">
          <div
            class="relative w-full h-full flex-1 overflow-hidden border-primary border-[16px]"
          >
            <Image
              src={bioImg1}
              alt="bio image 1"
              class:list={[
                "absolute top-0 w-full h-full left-1/2 -translate-x-1/2 object-cover object-top ",
              ]}
            />
          </div>
          <div
            class="relative w-full h-full flex-1 overflow-hidden border-primary border-[16px]"
          >
            <Image
              src={bioImg3}
              alt="bio image 3"
              class:list={[
                "absolute top-0 w-full left-1/2 -translate-x-1/2 object-cover h-full",
              ]}
            />
          </div>
        </div>
      </div>
      <Gallery client:only="react" />
    </div>
  </section>
</Layout>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  gsap.to("#videoMask", {
    scrollTrigger: {
      trigger: "#introVideo",
      start: "10% center",
      end: "center center",
      scrub: true,
    },
    maskImage: "radial-gradient(circle, black 100%, rgb(0, 0, 0, 0) 100%)",
  });
</script>
